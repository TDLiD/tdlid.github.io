<div id="adminAuthModal" class="fixed inset-0 bg-black/90 backdrop-blur-xl z-[10000] hidden flex items-center justify-center p-6">
    <div class="max-w-sm w-full bg-neutral-900 border border-white/10 p-8 rounded-3xl shadow-2xl">
        <h3 class="text-xl font-bold text-white mb-2">Admin Access</h3>
        <p class="text-neutral-500 text-sm mb-6">관리자 비밀번호를 입력하세요.</p>
        <input type="password" id="adminPasswordInput" 
               class="w-full bg-black border border-neutral-800 p-4 rounded-xl mb-4 text-white outline-none focus:border-cyan-500 transition"
               placeholder="Password">
        <div class="flex gap-2">
            <button onclick="closeAdminAuth()" class="flex-1 py-3 bg-neutral-800 text-white rounded-xl font-bold">취소</button>
            <button onclick="verifyAdminPassword()" class="flex-1 py-3 bg-cyan-600 text-white rounded-xl font-bold">확인</button>
        </div>
    </div>
</div>

<script>
    // 모달 닫기
    function closeAdminAuth() {
        document.getElementById('adminAuthModal').classList.add('hidden');
        document.getElementById('adminPasswordInput').value = '';
    }

    // 비밀번호 검증 (모든 페이지 공통 로직)
    async function verifyAdminPassword() {
        const pw = document.getElementById('adminPasswordInput').value;
        if(!pw) return;

        try {
            const snapshot = await firebase.database().ref('adminConfig/password').once('value');
            if (pw === snapshot.val()) {
                // index.html 위치와 하위 폴더 위치를 모두 고려한 경로 처리
                const isAdminFolder = window.location.pathname.includes('/admin/');
                window.location.href = isAdminFolder ? "admin.html" : "admin/admin.html";
            } else {
                alert("비밀번호가 틀렸습니다.");
                document.getElementById('adminPasswordInput').value = '';
            }
        } catch (err) {
            console.error("Auth Error:", err);
        }
    }

    // 엔터키 지원
    document.getElementById('adminPasswordInput')?.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') verifyAdminPassword();
    });
</script>