<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Solutions | TDLiD</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://cdn.tailwindcss.com"></script>
<link rel="stylesheet" href="css/main.css">

<style>
    /* íŒì—… ëª¨ë‹¬ ìŠ¤íƒ€ì¼ */
    .modal-backdrop {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.85);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 1000;
    }
    .modal-content {
        background: #171717; /* Dark background */
        color: #ddd;
        padding: 30px;
        border-radius: 12px;
        max-width: 90%;
        max-height: 90%;
        text-align: center;
        border: 1px solid #333;
        position: relative; /* ğŸ‘ˆ X ë²„íŠ¼ì˜ ì ˆëŒ€ ìœ„ì¹˜ ì§€ì •ì„ ìœ„í•´ ì¶”ê°€ */
    }
    .modal-image {
        max-width: 100%;
        max-height: 80vh; /* í™”ë©´ ë†’ì´ì— ë§ì¶° ì¡°ì • */
        object-fit: contain;
        border-radius: 8px;
        margin-bottom: 20px;
        cursor: zoom-out;
    }
    .modal-close-btn {
        margin-top: 20px;
        padding: 10px 20px;
        background-color: #06b6d4; /* cyan-500 */
        color: black;
        font-weight: 600;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        transition: background-color 0.2s;
    }
    .modal-close-btn:hover {
        background-color: #0891b2; /* cyan-600 */
    }
    
    /* íŒì—… ë‹«ê¸° "x" ë²„íŠ¼ ìŠ¤íƒ€ì¼ ì¶”ê°€ */
    .modal-close-x {
        position: absolute;
        top: 10px;
        right: 15px;
        background: none;
        border: none;
        color: #fff;
        font-size: 24px;
        font-weight: bold;
        cursor: pointer;
        padding: 5px;
        line-height: 1;
        transition: color 0.2s;
        z-index: 1010;
        opacity: 0.7;
    }
    .modal-close-x:hover {
        color: #06b6d4; /* cyan-500 */
        opacity: 1;
    }

    /* Stack Container ìŠ¤íƒ€ì¼: ê°€ë¡œ ìŠ¤í¬ë¡¤ í—ˆìš© */
    #stackContainer::-webkit-scrollbar {
        display: none; /* Chrome, Safari, Opera ìˆ¨ê¹€ */
    }
    #stackContainer {
        -ms-overflow-style: none; /* IE, Edge ìˆ¨ê¹€ */
        scrollbar-width: none; /* Firefox ìˆ¨ê¹€ */
    }

    /* í¬ì»¤ìŠ¤ ì˜ì—­ì˜ ì œëª© ë° ì„¤ëª… ìŠ¤íƒ€ì¼ */
    #focusArea h4 {
        font-size: 1.5rem; /* Large title in focus area */
    }
    #focusArea p {
        font-size: 1rem;
    }
    
    /* í¬ì»¤ìŠ¤ ì˜ì—­ ì´ë¯¸ì§€ ìŠ¤íƒ€ì¼ */
    .focus-image-container img {
        height: auto;
        object-fit: contain;
        cursor: pointer;
    }
    
    /* ---------------------------------------------------- */
    /* ğŸŒŸ [NEW] ëª¨ë°”ì¼ ë©”ë‰´ ìŠ¤íƒ€ì¼ (ê³µí†µ ì•ˆì • êµ¬ì¡°) ğŸŒŸ */
    /* ---------------------------------------------------- */
    .mobile-overlay-menu {
        /* Header height is approx 68px (px-6 py-4) */
        height: calc(100vh - 68px); 
        top: 68px; /* Set just below the header */
        right: 0;
        position: fixed; 
    }
    /* [NEW] Scroll lock for body */
    .overflow-hidden {
        overflow: hidden;
    }

    .dropdown-link {
        padding: 12px 20px;
        text-align: right;
        font-size: 1.125rem;
        color: #ccc;
        transition: background-color 0.2s, color 0.2s;
        border-bottom: 1px solid #262626;
    }

    .dropdown-link:hover {
        background-color: #0d383d; 
        color: #38bdf8;
    }
        
    .dropdown-quote-btn {
        padding: 15px 20px;
        text-align: center;
        background-color: #38bdf8; 
        color: #0a0a0a;
        font-weight: 600;
        border-radius: 0 0 10px 10px;
        transition: background-color 0.2s;
    }

    .dropdown-quote-btn:hover {
        background-color: #67e8f9;
    }

</style>
</head>

<body class="bg-neutral-950 text-neutral-100 font-[Pretendard] flex flex-col min-h-screen">

<header class="fixed top-0 left-0 w-full z-50 bg-neutral-950/80 backdrop-blur border-b border-neutral-800">
    <div class="max-w-7xl mx-auto flex items-center justify-between px-6 py-4">

        <a href="index.html" class="block">
            <h1 class="flex items-center gap-3 text-xl font-bold tracking-wide">
                <img src="images/logo/logo.png" alt="TDL Energy Logo" class="header-logo object-contain">
                <span class="animated-logo-text">TDL ENERGY INDONESIA</span>
            </h1>
        </a>

        <nav class="hidden md:flex items-center gap-10 text-sm text-neutral-300">
            <a href="index.html" class="nav-link hover:text-cyan-400">Home</a>
            <a href="products.html" class="nav-link hover:text-cyan-400">Products</a>
            <a href="technology.html" class="nav-link hover:text-cyan-400">Technology</a>
            <a href="solutions.html" class="nav-link text-white font-bold hover:text-cyan-400">Solutions</a>
            <a href="company.html" class="nav-link hover:text-cyan-400">Company</a>
            <a href="news.html" class="nav-link hover:text-cyan-400">News</a>
            <a href="contact.html" class="ml-4 px-5 py-2 rounded-xl bg-cyan-500 hover:bg-cyan-400 text-black font-semibold transition">
                Request Quote
            </a>
        </nav>

        <button id="mobileMenuBtn" aria-expanded="false" class="md:hidden text-2xl text-cyan-400 p-2 border border-cyan-500 rounded-full hover:bg-cyan-500 hover:text-black transition-all duration-300">
            <span id="menuIcon">â˜°</span>
            <span id="closeIcon" class="hidden">âœ•</span>
        </button>
    </div>

    <div id="mobileMenu" 
         class="fixed left-0 w-full mobile-overlay-menu bg-neutral-950 md:hidden
                flex-col opacity-0 invisible transition-all duration-300 transform translate-x-full
                border-t border-neutral-800 z-40" 
         role="menu">
        <a href="index.html" class="dropdown-link">Home</a>
        <a href="products.html" class="dropdown-link">Products</a>
        <a href="technology.html" class="dropdown-link">Technology</a>
        <a href="solutions.html" class="dropdown-link font-bold text-cyan-500 bg-neutral-900/50">Solutions</a>
        <a href="company.html" class="dropdown-link">Company</a>
        <a href="news.html" class="dropdown-link">News</a>
        <a href="contact.html" class="dropdown-quote-btn mt-4 rounded-xl">Request Quote</a>
    </div>
</header>

<main class="flex-grow pt-32 pb-10 px-6">
    <div class="max-w-6xl mx-auto">
        <h3 class="text-3xl font-bold mb-10">Custom Solutions</h3>

        <div id="focusArea" class="mb-8 p-6 bg-neutral-900 rounded-xl border border-cyan-500/30 transition-all duration-500 shadow-xl">
            <p class="text-center text-neutral-500 py-10">Select a solution below to view details.</p>
        </div>

        <div id="stackContainer" class="flex gap-4 overflow-x-auto pb-4 justify-center">
        </div>
    </div>
</main>


<footer class="py-4 px-6 text-center text-neutral-500 border-t border-neutral-800">
    Â© 2025 TDL Energy Indonesia. All rights reserved.
</footer>

<script>
    // ----------------------------------------------------
    // 1. ì†”ë£¨ì…˜ ë°ì´í„° ì •ì˜
    // ----------------------------------------------------
    const solutionsData = [
        { id: 'A', title: 'A. EV Motorcycle Conversion Business', desc: 'TDLID supplies electric motorcycle conversion kits and battery packs to local governments and universities in Indonesia.', images: ['images/solutions/solution1.png', 'images/solutions/solution1-1.png'] },
        { id: 'B', title: 'B. Employee Ownership Program', desc: 'TDLID is the initiator of this Program. TDLID announced the \'Employee Ownership Program\' with GESITS and MOTORIZ on April 30, 2024.', images: ['images/solutions/solution2.png', 'images/solutions/solution2-1.png'] },
        { id: 'C', title: 'C. Lease and Rental', desc: 'TDLiD offers leasing and rental financing solutions to accelerate the adoption of electric motorcycles.', images: ['images/solutions/solution3.png', 'images/solutions/solution3-1.png'] },
        { id: 'D', title: 'D. Solar home charging', desc: 'TDLiD offers solar power generation systems that can be utilized by individual households and small businesses to achieve true carbon zero in Indonesia\'s EV ecosystem.', images: ['images/solutions/solution4.png', 'images/solutions/solution4-1.png'] },
        { id: 'E', title: 'E. Battery Recycling', desc: 'TDLiD contributes to building a virtuous cycle ecosystem for raw materials of Indonesian nickel and recycled batteries, while providing a business model that can achieve true zero carbon in the electric motorcycle ecosystem.', images: ['images/solutions/solution5.png', 'images/solutions/solution5-1.png'] }
    ];

    const focusArea = document.getElementById('focusArea');
    const stackContainer = document.getElementById('stackContainer');
    let currentFocusId = null;
    let isAnimating = false;
    
    // ğŸŒŸ ìë™ ì „í™˜ íƒ€ì´ë¨¸ ê´€ë ¨ ë³€ìˆ˜ ğŸŒŸ
    let autoChangeInterval;
    const AUTO_CHANGE_TIME = 3000; // 3ì´ˆ
    const transitionDuration = 800; // 0.8s (ìŠ¬ë¼ì´ë“œ/í˜ì´ë“œ ì†ë„)
    const slideDistance = 100; // 100px ì™¼ìª½ìœ¼ë¡œ ìŠ¬ë¼ì´ë“œ

    // ----------------------------------------------------
    // 2. íŒì—… ì°½ í•¨ìˆ˜ (X ë²„íŠ¼ ì¶”ê°€)
    // ----------------------------------------------------
    function openSolutionPopup(imageSrc, textContent) {
        const modal = document.createElement('div');
        modal.classList.add('modal-backdrop');

        // ğŸ‘ˆ ëª¨ë‹¬ ë‚´ìš©ì— 'X' ë²„íŠ¼ ì¶”ê°€
        modal.innerHTML = `
            <div class="modal-content">
                <button class="modal-close-x">X</button> 
                <img src="${imageSrc}" alt="Solution Detail" class="modal-image">
                <p style="margin-top: 10px; font-size: 16px;">${textContent}</p>
                <button class="modal-close-btn">Close</button>
            </div>
        `;

        const closeModal = () => {
            document.body.removeChild(modal);
        };
        
        modal.querySelector('.modal-close-btn').addEventListener('click', closeModal);
        modal.querySelector('.modal-close-x').addEventListener('click', closeModal); // ğŸ‘ˆ 'X' ë²„íŠ¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
        
        modal.addEventListener('click', (e) => {
            if (e.target === modal) {
                closeModal();
            }
        });

        document.body.appendChild(modal);
    }

    // ----------------------------------------------------
    // 3. í¬ì»¤ìŠ¤ ì˜ì—­ ë Œë”ë§ í•¨ìˆ˜ (ìƒëµ ì—†ìŒ)
    // ----------------------------------------------------
    function renderFocusArea(solution) {
        currentFocusId = solution.id;
        
        const imageHTML = solution.images.map(src => `
            <a href="#" class="openSolutionDetail focus-image-container w-full" 
                data-detail-src="${src}" 
                data-detail-text="${solution.desc}"
                onclick="event.preventDefault(); openSolutionPopup('${src}', '${solution.desc.replace(/'/g, "\\'")}')"
            >
                <img src="${src}" class="w-full rounded-lg hover:ring-2 ring-cyan-500/50 transition" loading="lazy">
            </a>
        `).join('');

        focusArea.innerHTML = `
            <h4 class="font-bold text-cyan-400 mb-4">${solution.title}</h4>
            
            <div class="flex flex-col md:flex-row gap-6 mb-6 justify-center">
                ${imageHTML}
            </div>

            <p class="text-neutral-300 text-center">${solution.desc}</p>
        `;
    }

    // ----------------------------------------------------
    // 4. ìŠ¤íƒ ì»¨í…Œì´ë„ˆ ë Œë”ë§ í•¨ìˆ˜ (ìƒëµ ì—†ìŒ)
    // ----------------------------------------------------
    function renderStackContainer() {
        const stackItems = solutionsData.filter(s => s.id !== currentFocusId);
        
        stackContainer.innerHTML = stackItems.map(s => `
            <div 
                id="stack-item-${s.id}" 
                class="stack-item p-4 bg-neutral-900 border border-neutral-800 rounded-xl cursor-pointer hover:border-cyan-500/50 transition-all duration-300 flex-shrink-0 w-32 md:w-48 text-center"
                data-solution-id="${s.id}"
                onclick="selectSolution('${s.id}', false)"
            >
                <h5 class="font-semibold text-xs mb-2 text-neutral-300">${s.title}</h5>
                <img src="${s.images[0]}" class="w-full h-16 object-cover rounded-lg opacity-70 transition-opacity" loading="lazy">
            </div>
        `).join('');
    }

    // ----------------------------------------------------
    // 5-1. ìë™ íƒ€ì´ë¨¸ ì œì–´ í•¨ìˆ˜ ğŸŒŸ [ì¶”ê°€] ğŸŒŸ
    // ----------------------------------------------------
    function stopAutoChange() {
        if (autoChangeInterval) {
            clearInterval(autoChangeInterval);
            autoChangeInterval = null;
        }
    }

    function startAutoChange() {
        stopAutoChange(); // ê¸°ì¡´ íƒ€ì´ë¨¸ë¥¼ ì•ˆì „í•˜ê²Œ ì •ë¦¬
        
        autoChangeInterval = setInterval(() => {
            // í˜„ì¬ ì†”ë£¨ì…˜ì˜ ì¸ë±ìŠ¤ ì°¾ê¸°
            const currentIndex = solutionsData.findIndex(s => s.id === currentFocusId);
            
            // ë‹¤ìŒ ì¸ë±ìŠ¤ ê³„ì‚° (ë§ˆì§€ë§‰ì¼ ê²½ìš° ì²˜ìŒìœ¼ë¡œ ìˆœí™˜)
            const nextIndex = (currentIndex + 1) % solutionsData.length;
            
            const nextSolutionId = solutionsData[nextIndex].id;

            // ìë™ ë³€ê²½ì„ì„ ì•Œë¦¬ëŠ” í”Œë˜ê·¸(true)ì™€ í•¨ê»˜ selectSolution í˜¸ì¶œ
            selectSolution(nextSolutionId, true);
            
        }, AUTO_CHANGE_TIME);
    }
    
    // ----------------------------------------------------
    // 5-2. ì†”ë£¨ì…˜ ì„ íƒ ë° ì• ë‹ˆë©”ì´ì…˜ ì´ë™ í•¨ìˆ˜ ğŸŒŸ [ìˆ˜ì •] ğŸŒŸ
    // ----------------------------------------------------
    function selectSolution(id, isAutomatic = false) {
        if (isAnimating) return;
        isAnimating = true;
        
        const newSolution = solutionsData.find(s => s.id === id);
        if (!newSolution) {
            isAnimating = false;
            // ìˆ˜ë™ í´ë¦­ì´ì—ˆë‹¤ë©´ íƒ€ì´ë¨¸ë¥¼ ì¬ì‹œì‘í•´ì•¼ í•  ìˆ˜ë„ ìˆì§€ë§Œ, IDê°€ ì—†ì„ ê²½ìš° ì¬ì‹œì‘í•˜ì§€ ì•ŠìŒ
            return;
        }

        // ìˆ˜ë™ í´ë¦­ì¸ ê²½ìš°, ìë™ íƒ€ì´ë¨¸ë¥¼ ë©ˆì¶¥ë‹ˆë‹¤.
        if (!isAutomatic) {
            stopAutoChange();
        }

        // 1. í˜„ì¬ focusAreaë¥¼ ì™¼ìª½ìœ¼ë¡œ ë°€ë©´ì„œ í˜ì´ë“œ ì•„ì›ƒ ì• ë‹ˆë©”ì´ì…˜ ì‹œì‘
        focusArea.style.transition = `transform ${transitionDuration}ms ease-out, opacity ${transitionDuration}ms ease-out`;
        focusArea.style.transform = `translateX(-${slideDistance}px)`;
        focusArea.style.opacity = '0';
        
        // ìŠ¤í¬ë¡¤ì„ focusArea ìœ„ì¹˜ë¡œ ë¶€ë“œëŸ½ê²Œ ì´ë™ (ìë™ ì „í™˜ ì‹œì—ëŠ” ìŠ¤í¬ë¡¤í•˜ì§€ ì•Šë„ë¡ ì¡°ê±´ ì¶”ê°€)
        if (!isAutomatic) {
            const focusAreaRect = focusArea.getBoundingClientRect();
            const targetScrollY = focusAreaRect.top + window.scrollY - 100; 
            window.scrollTo({
                top: targetScrollY,
                behavior: 'smooth'
            });
        }

        // 2. ì• ë‹ˆë©”ì´ì…˜ì´ ëë‚œ í›„ (800ms) ë‚´ìš© ì—…ë°ì´íŠ¸ ë° í˜ì´ë“œ ì¸ ì‹œì‘
        setTimeout(() => {
            // a. ì „í™˜ íš¨ê³¼ ë¹„í™œì„±í™” ë° ìœ„ì¹˜ ì´ˆê¸°í™” (ìƒˆë¡œìš´ ë‚´ìš©ì„ ì¤‘ì•™ì— ë Œë”ë§ ì¤€ë¹„)
            focusArea.style.transition = 'none';
            focusArea.style.transform = 'translateX(0)'; 
            
            // b. ë‚´ìš© ì—…ë°ì´íŠ¸ (ìƒˆë¡œìš´ ë‚´ìš©ì„ ì¤‘ì•™ì— ë°°ì¹˜)
            renderFocusArea(newSolution); 
            renderStackContainer(); 
            
            // c. ê°•ì œ ë¦¬í”Œë¡œìš° í›„ í˜ì´ë“œ ì¸ ì‹œì‘
            void focusArea.offsetWidth; // Trigger reflow for transition to take effect
            
            focusArea.style.transition = `opacity ${transitionDuration}ms ease-out`; // í˜ì´ë“œ ì¸ë§Œ ì ìš©
            focusArea.style.opacity = '1';

            isAnimating = false;
            
            // ìˆ˜ë™ í´ë¦­ì´ì—ˆë‹¤ë©´ íƒ€ì´ë¨¸ë¥¼ ë‹¤ì‹œ ì‹œì‘
            if (!isAutomatic) {
                startAutoChange();
            }
        }, transitionDuration); 
    }

    // ----------------------------------------------------
    // 6. ì´ˆê¸°í™”
    // ----------------------------------------------------
    if (solutionsData.length > 0) {
        renderFocusArea(solutionsData[0]);
        renderStackContainer();
        
        // ì´ˆê¸° ë¡œë“œ ì‹œ focusAreaì˜ íˆ¬ëª…ë„ë¥¼ 1ë¡œ ì„¤ì •í•˜ì—¬ ë³´ì´ë„ë¡ í•¨
        focusArea.style.opacity = '1'; 
        focusArea.style.transform = 'translateX(0)';
        
        // ğŸŒŸ 3ì´ˆ íƒ€ì´ë¨¸ ì‹œì‘ ğŸŒŸ
        startAutoChange();
    }
    
    // ----------------------------------------------------
    // ğŸŒŸ [NEW] ë©”ë‰´ ì œì–´ ë¡œì§ (Click / ë°˜ì‘í˜• ì•ˆì •í™”) ğŸŒŸ (ê¸°ì¡´ ëª¨ë°”ì¼ ë©”ë‰´ í† ê¸€ ë¡œì§ ëŒ€ì²´)
    // ----------------------------------------------------

    const menuBtn = document.getElementById('mobileMenuBtn');
    const dropdown = document.getElementById('mobileMenu');
    const menuIcon = document.getElementById('menuIcon');
    const closeIcon = document.getElementById('closeIcon');
    const allMenuLinks = dropdown.querySelectorAll('a');
    const body = document.body; // Use document.body for scroll lock

    // Transition classes for smooth open/close
    const OPEN_CLASSES = ['opacity-100', 'translate-x-0'];
    const CLOSE_CLASSES = ['opacity-0', 'translate-x-full', 'hidden'];

    if (menuBtn && dropdown) {
        
        // Function to open the menu
        const openMenu = () => {
            dropdown.classList.remove(...CLOSE_CLASSES);
            dropdown.classList.add(...OPEN_CLASSES, 'flex');
            body.classList.add('overflow-hidden'); // Scroll Lock
            menuIcon.classList.add('hidden');
            closeIcon.classList.remove('hidden');
            menuBtn.setAttribute('aria-expanded', 'true');
        };

        // Function to close the menu
        const closeMenu = () => {
            // Start transition
            dropdown.classList.remove(...OPEN_CLASSES, 'flex');
            dropdown.classList.add('opacity-0', 'translate-x-full');
            
            // Hide and unlock scroll after transition
            setTimeout(() => {
                // ì´ í´ë˜ìŠ¤ê°€ ì—¬ì „íˆ ì¡´ì¬í•  ë•Œë§Œ ìˆ¨ê¸°ê³  ìŠ¤í¬ë¡¤ í•´ì œ (ì´íƒˆ ë°©ì§€)
                if (dropdown.classList.contains('opacity-0')) {
                    dropdown.classList.add('hidden'); 
                    body.classList.remove('overflow-hidden'); // Scroll Unlock
                }
            }, 300); // Wait for transition duration

            menuIcon.classList.remove('hidden');
            closeIcon.classList.add('hidden');
            menuBtn.setAttribute('aria-expanded', 'false');
        };


        menuBtn.addEventListener('click', () => {
            const isOpen = menuBtn.getAttribute('aria-expanded') === 'true';
            if (isOpen) {
                closeMenu();
            } else {
                openMenu();
            }
        });

        // ë©”ë‰´ ë§í¬ í´ë¦­ ì‹œ ë©”ë‰´ ë‹«ê¸° (UX ê°œì„ )
        allMenuLinks.forEach(link => {
            link.addEventListener('click', closeMenu);
        });

        // í™”ë©´ í¬ê¸°ê°€ md(768px) ì´ìƒìœ¼ë¡œ ë³€ê²½ë˜ë©´ ëª¨ë°”ì¼ ë©”ë‰´ ê°•ì œ ë‹«ê¸° (ë°˜ì‘í˜• ì•ˆì •í™”)
        window.addEventListener('resize', () => {
            if (window.innerWidth >= 768 && menuBtn.getAttribute('aria-expanded') === 'true') {
                closeMenu();
            }
        });
        
        // ESC í‚¤ë¡œ ë‹«ê¸° (ì ‘ê·¼ì„±)
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && menuBtn.getAttribute('aria-expanded') === 'true') {
                closeMenu();
                menuBtn.focus();
            }
        });
    }
</script>

</body>
</html>