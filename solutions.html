<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Solutions | TDLiD</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://cdn.tailwindcss.com"></script>
<link rel="stylesheet" href="css/main.css">

<style>
    /* íŒì—… ëª¨ë‹¬ ìŠ¤íƒ€ì¼ */
    .modal-backdrop {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.85);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 1000;
    }
    .modal-content {
        background: #171717; /* Dark background */
        color: #ddd;
        padding: 30px;
        border-radius: 12px;
        max-width: 90%;
        max-height: 90%;
        text-align: center;
        border: 1px solid #333;
    }
    .modal-image {
        max-width: 100%;
        max-height: 80vh; /* í™”ë©´ ë†’ì´ì— ë§ì¶° ì¡°ì • */
        object-fit: contain;
        border-radius: 8px;
        margin-bottom: 20px;
        cursor: zoom-out;
    }
    .modal-close-btn {
        margin-top: 20px;
        padding: 10px 20px;
        background-color: #06b6d4; /* cyan-500 */
        color: black;
        font-weight: 600;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        transition: background-color 0.2s;
    }
    .modal-close-btn:hover {
        background-color: #0891b2; /* cyan-600 */
    }

    /* Stack Container ìŠ¤íƒ€ì¼: ê°€ë¡œ ìŠ¤í¬ë¡¤ í—ˆìš© */
    #stackContainer::-webkit-scrollbar {
        display: none; /* Chrome, Safari, Opera ìˆ¨ê¹€ */
    }
    #stackContainer {
        -ms-overflow-style: none; /* IE, Edge ìˆ¨ê¹€ */
        scrollbar-width: none; /* Firefox ìˆ¨ê¹€ */
    }

    /* í¬ì»¤ìŠ¤ ì˜ì—­ì˜ ì œëª© ë° ì„¤ëª… ìŠ¤íƒ€ì¼ */
    #focusArea h4 {
        font-size: 1.5rem; /* Large title in focus area */
    }
    #focusArea p {
        font-size: 1rem;
    }
    
    /* í¬ì»¤ìŠ¤ ì˜ì—­ ì´ë¯¸ì§€ ìŠ¤íƒ€ì¼ */
    .focus-image-container img {
        height: auto;
        object-fit: contain;
        cursor: pointer;
    }

    /* ğŸŒŸ [ìˆ˜ì •] ì• ë‹ˆë©”ì´ì…˜ ì‹œê°„ì„ 0.3së¡œ ë³€ê²½ ğŸŒŸ */
    .transition-animation {
        transition: transform 1.0s ease-in-out, opacity 1.0s ease-in-out, box-shadow 1.0s;
        /* box-shadowë¥¼ ì¶”ê°€í•˜ì—¬ íŒŒë„ì²˜ëŸ¼ ë¶€í’€ì–´ ì˜¤ë¥´ëŠ” íš¨ê³¼ë¥¼ ì¤ë‹ˆë‹¤. */
    }

</style>
</head>

<body class="bg-neutral-950 text-neutral-100 font-[Pretendard] flex flex-col min-h-screen">

<header class="fixed top-0 left-0 w-full z-50 bg-neutral-950/80 backdrop-blur border-b border-neutral-800">
    <div class="max-w-7xl mx-auto flex items-center justify-between px-6 py-4">

        <a href="index.html" class="block">
            <h1 class="flex items-center gap-3 text-xl font-bold tracking-wide">
                <img src="images/logo/logo.png" alt="TDL Energy Logo" class="header-logo object-contain">
                <span class="animated-logo-text">TDL ENERGY INDONESIA</span>
            </h1>
        </a>

        <nav class="hidden md:flex items-center gap-10 text-sm text-neutral-300">
            <a href="index.html" class="nav-link">Home</a>
            <a href="products.html" class="nav-link">Products</a>
            <a href="technology.html" class="nav-link">Technology</a>
            <a href="solutions.html" class="nav-link text-white font-bold">Solutions</a>
            <a href="company.html" class="nav-link">Company</a>
            <a href="news.html" class="nav-link">News</a>
            <a href="contact.html" class="ml-4 px-5 py-2 rounded-xl bg-cyan-500 hover:bg-cyan-400 text-black font-semibold">
                Request Quote
            </a>
        </nav>

        <button id="mobileMenuBtn" class="md:hidden">â˜°</button>
    </div>

    <div id="mobileMenu" class="hidden md:hidden fixed top-16 right-6 bg-neutral-900 p-6 rounded-2xl shadow-xl border border-neutral-800 z-50 flex-col gap-4 text-white text-base">
        <a href="index.html" class="nav-link-mobile">Home</a>
        <a href="products.html" class="nav-link-mobile">Products</a>
        <a href="technology.html" class="nav-link-mobile">Technology</a>
        <a href="solutions.html" class="nav-link-mobile font-bold text-cyan-500">Solutions</a>
        <a href="company.html" class="nav-link-mobile">Company</a>
        <a href="news.html" class="nav-link-mobile">News</a>
        <a href="contact.html" class="nav-link-mobile mt-2 px-5 py-2 rounded-xl bg-cyan-500 text-black font-semibold text-center">
            Request Quote
        </a>
    </div>
</header>

<main class="flex-grow pt-32 pb-10 px-6">
    <div class="max-w-6xl mx-auto">
        <h3 class="text-3xl font-bold mb-10">Custom Solutions</h3>

        <div id="focusArea" class="mb-8 p-6 bg-neutral-900 rounded-xl border border-cyan-500/30 transition-all duration-500 shadow-xl">
            <p class="text-center text-neutral-500 py-10">Select a solution below to view details.</p>
        </div>

        <div id="stackContainer" class="flex gap-4 overflow-x-auto pb-4 justify-center">
        </div>
    </div>
</main>


<footer class="py-4 px-6 text-center text-neutral-500 border-t border-neutral-800">
    Â© 2025 TDL Energy Indonesia. All rights reserved.
</footer>

<script>
    // ----------------------------------------------------
    // 1. ì†”ë£¨ì…˜ ë°ì´í„° ì •ì˜
    // ----------------------------------------------------
    const solutionsData = [
        { id: 'A', title: 'A. EV Motorcycle Conversion Business', desc: 'TDLID supplies electric motorcycle conversion kits and battery packs to local governments and universities in Indonesia.', images: ['images/solutions/solution1.png', 'images/solutions/solution1-1.png'] },
        { id: 'B', title: 'B. Employee Ownership Program', desc: 'TDLID is the initiator of this Program. TDLID announced the \'Employee Ownership Program\' with GESITS and MOTORIZ on April 30, 2024.', images: ['images/solutions/solution2.png', 'images/solutions/solution2-1.png'] },
        { id: 'C', title: 'C. Lease and Rental', desc: 'TDLiD offers leasing and rental financing solutions to accelerate the adoption of electric motorcycles.', images: ['images/solutions/solution3.png', 'images/solutions/solution3-1.png'] },
        { id: 'D', title: 'D. Solar home charging', desc: 'TDLiD offers solar power generation systems that can be utilized by individual households and small businesses to achieve true carbon zero in Indonesia\'s EV ecosystem.', images: ['images/solutions/solution4.png', 'images/solutions/solution4-1.png'] },
        { id: 'E', title: 'E. Battery Recycling', desc: 'TDLiD contributes to building a virtuous cycle ecosystem for raw materials of Indonesian nickel and recycled batteries, while providing a business model that can achieve true zero carbon in the electric motorcycle ecosystem.', images: ['images/solutions/solution5.png', 'images/solutions/solution5-1.png'] }
    ];

    const focusArea = document.getElementById('focusArea');
    const stackContainer = document.getElementById('stackContainer');
    let currentFocusId = null;
    let isAnimating = false;

    // ----------------------------------------------------
    // 2. íŒì—… ì°½ í•¨ìˆ˜
    // ----------------------------------------------------
    function openSolutionPopup(imageSrc, textContent) {
        const modal = document.createElement('div');
        modal.classList.add('modal-backdrop');

        modal.innerHTML = `
            <div class="modal-content">
                <img src="${imageSrc}" alt="Solution Detail" class="modal-image">
                <p style="margin-top: 10px; font-size: 16px;">${textContent}</p>
                <button class="modal-close-btn">Close</button>
            </div>
        `;

        modal.querySelector('.modal-close-btn').addEventListener('click', () => {
            document.body.removeChild(modal);
        });
        
        modal.addEventListener('click', (e) => {
            if (e.target === modal) {
                document.body.removeChild(modal);
            }
        });

        document.body.appendChild(modal);
    }

    // ----------------------------------------------------
    // 3. í¬ì»¤ìŠ¤ ì˜ì—­ ë Œë”ë§ í•¨ìˆ˜
    // ----------------------------------------------------
    function renderFocusArea(solution) {
        currentFocusId = solution.id;
        
        const imageHTML = solution.images.map(src => `
            <a href="#" class="openSolutionDetail focus-image-container w-full" 
                data-detail-src="${src}" 
                data-detail-text="${solution.desc}"
                onclick="openSolutionPopup('${src}', '${solution.desc.replace(/'/g, "\\'")}')"
            >
                <img src="${src}" class="w-full rounded-lg hover:ring-2 ring-cyan-500/50 transition" loading="lazy">
            </a>
        `).join('');

        focusArea.innerHTML = `
            <h4 class="font-bold text-cyan-400 mb-4">${solution.title}</h4>
            
            <div class="flex flex-col md:flex-row gap-6 mb-6 justify-center">
                ${imageHTML}
            </div>

            <p class="text-neutral-300 text-center">${solution.desc}</p>
        `;
    }

    // ----------------------------------------------------
    // 4. ìŠ¤íƒ ì»¨í…Œì´ë„ˆ ë Œë”ë§ í•¨ìˆ˜
    // ----------------------------------------------------
    function renderStackContainer() {
        const stackItems = solutionsData.filter(s => s.id !== currentFocusId);
        
        stackContainer.innerHTML = stackItems.map(s => `
            <div 
                id="stack-item-${s.id}" 
                class="stack-item p-4 bg-neutral-900 border border-neutral-800 rounded-xl cursor-pointer hover:border-cyan-500/50 transition-all duration-300 flex-shrink-0 w-32 md:w-48 text-center"
                data-solution-id="${s.id}"
                onclick="selectSolution('${s.id}')"
            >
                <h5 class="font-semibold text-xs mb-2 text-neutral-300">${s.title}</h5>
                <img src="${s.images[0]}" class="w-full h-16 object-cover rounded-lg opacity-70 transition-opacity" loading="lazy">
            </div>
        `).join('');
    }

    // ----------------------------------------------------
    // 5. ì†”ë£¨ì…˜ ì„ íƒ ë° ì• ë‹ˆë©”ì´ì…˜ ì´ë™ í•¨ìˆ˜
    // ----------------------------------------------------
    function selectSolution(id) {
        if (isAnimating) return;
        isAnimating = true;

        const newSolution = solutionsData.find(s => s.id === id);
        if (!newSolution) {
            isAnimating = false;
            return;
        }

        const clickedElement = document.getElementById(`stack-item-${id}`);
        if (!clickedElement) {
            isAnimating = false;
            return;
        }

        // 1. í´ë¦­ëœ ìš”ì†Œì˜ í˜„ì¬ ìœ„ì¹˜ì™€ í¬ê¸° ì¸¡ì •
        const startRect = clickedElement.getBoundingClientRect();
        
        // 2. ìŠ¤í¬ë¡¤ ìœ„ì¹˜ë¥¼ í¬í•¨í•œ í¬ì»¤ìŠ¤ ì˜ì—­ì˜ ìµœì¢… ìœ„ì¹˜ ê³„ì‚°
        const focusAreaRect = focusArea.getBoundingClientRect();
        const targetScrollY = focusAreaRect.top + window.scrollY - 100; // í—¤ë” ê³µê°„ í™•ë³´ (100px ì •ë„)

        // 3. ì• ë‹ˆë©”ì´ì…˜ì„ ìœ„í•´ í´ë¦­ëœ ìš”ì†Œë¥¼ ë³µì œí•˜ê³  DOMì— ì¶”ê°€
        const clonedElement = clickedElement.cloneNode(true);
        clonedElement.classList.add('transition-animation');
        clonedElement.style.position = 'fixed';
        clonedElement.style.top = `${startRect.top}px`;
        clonedElement.style.left = `${startRect.left}px`;
        clonedElement.style.width = `${startRect.width}px`;
        clonedElement.style.height = `${startRect.height}px`;
        clonedElement.style.margin = '0';
        clonedElement.style.zIndex = '10000';
        
        // ë³µì œëœ ìš”ì†Œê°€ ê¸°ì¡´ ìš”ì†Œë¥¼ ë®ë„ë¡ ê¸°ì¡´ ìš”ì†ŒëŠ” ì ì‹œ ìˆ¨ê¹€
        clickedElement.style.opacity = '0'; 

        document.body.appendChild(clonedElement);

        // 4. ê°•ì œ ë¦¬í”Œë¡œìš° (CSS ë³€ê²½ ì‚¬í•­ì„ ì¦‰ì‹œ ì ìš©í•˜ì—¬ ì• ë‹ˆë©”ì´ì…˜ ì‹œì‘ì  ì„¤ì •)
        void clonedElement.offsetWidth; 

        // 5. ìµœì¢… ëª©ì ì§€ ìœ„ì¹˜ ê³„ì‚° ë° ì• ë‹ˆë©”ì´ì…˜ ì‹œì‘
        // ìƒë‹¨ focusAreaì˜ ì¤‘ì•™ìœ¼ë¡œ ì´ë™
        const targetX = focusAreaRect.left + focusAreaRect.width / 2 - startRect.width / 2;
        const targetY = 150; // ìµœì¢…ì ìœ¼ë¡œ í™”ë©´ ìƒë‹¨ì—ì„œ 150px ìœ„ì¹˜ (í—¤ë” ì•„ë˜)

        clonedElement.style.transform = `
            translate(${targetX - startRect.left}px, ${targetY - startRect.top}px) 
            scale(1.2) /* íŒŒë„ì²˜ëŸ¼ ë¶€í’€ì–´ ì˜¤ë¥´ëŠ” íš¨ê³¼ */
        `;
        clonedElement.style.opacity = '0'; // ìµœì¢…ì ìœ¼ë¡œ ì‚¬ë¼ì§€ë„ë¡ ì„¤ì •
        clonedElement.style.boxShadow = '0 0 40px rgba(56, 189, 248, 0.5)'; // ì²­ë¡ìƒ‰ ê·¸ë¦¼ì íš¨ê³¼

        // 6. ìŠ¤í¬ë¡¤ ì´ë™ ì‹œì‘
        window.scrollTo({
            top: targetScrollY,
            behavior: 'smooth'
        });

        // 7. ì• ë‹ˆë©”ì´ì…˜ì´ ëë‚œ í›„ (0.3ì´ˆ í›„) ìµœì¢… ì—…ë°ì´íŠ¸ ìˆ˜í–‰
        setTimeout(() => {
            // ìƒë‹¨ ì˜ì—­ ë‚´ìš© ì—…ë°ì´íŠ¸
            renderFocusArea(newSolution); 
            // ìŠ¤íƒ ì»¨í…Œì´ë„ˆ ì¬ë Œë”ë§ (ì´ë™ëœ ì•„ì´í…œ ìˆ¨ê¹€)
            renderStackContainer(); 
            // ë³µì œëœ ìš”ì†Œ ì œê±°
            document.body.removeChild(clonedElement); 
            // ì›ë˜ ìš”ì†Œ ë‹¤ì‹œ ë³´ì´ê²Œ ì²˜ë¦¬
            clickedElement.style.opacity = '';
            
            isAnimating = false;
        }, 1000); // ğŸ‘ˆ ìˆ˜ì •ëœ ì†ë„ (ë°€ë¦¬ì´ˆ)
    }

    // ----------------------------------------------------
    // ì´ˆê¸°í™”: ì²« ë²ˆì§¸ ì†”ë£¨ì…˜ì„ ê¸°ë³¸ìœ¼ë¡œ í‘œì‹œ
    // ----------------------------------------------------
    if (solutionsData.length > 0) {
        renderFocusArea(solutionsData[0]);
        renderStackContainer();
    }
    
    // ëª¨ë°”ì¼ ë©”ë‰´ í† ê¸€ (ê¸°ì¡´ ë¡œì§ ìœ ì§€)
    document.getElementById('mobileMenuBtn').addEventListener('click', function() {
        document.getElementById('mobileMenu').classList.toggle('hidden');
        document.getElementById('mobileMenu').classList.toggle('flex');
    });
</script>

</body>
</html>