<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Technology | TDLiD</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="css/main.css">
    <link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@300;400;600;700&display=swap" rel="stylesheet">

    <style>
        /* 1. 팝업 모달 스타일 (기존 유지 및 X버튼 보강) */
        .modal-backdrop {
            position: fixed; inset: 0; background-color: rgba(0, 0, 0, 0.9);
            display: flex; justify-content: center; align-items: center; z-index: 10002;
        }
        .modal-content {
            background: #171717; color: #ddd; padding: 30px; border-radius: 12px;
            max-width: 90%; max-height: 90%; text-align: center; border: 1px solid #333; position: relative;
        }
        .modal-image { max-width: 100%; max-height: 70vh; object-fit: contain; border-radius: 8px; margin-bottom: 20px; }
        .modal-close-btn { margin-top: 20px; padding: 10px 24px; background: #06b6d4; color: black; font-weight: 600; border-radius: 50px; cursor: pointer; transition: 0.2s; }
        .modal-close-btn:hover { background: #22d3ee; transform: scale(1.05); }
        .modal-close-x { position: absolute; top: 15px; right: 20px; color: #fff; font-size: 28px; cursor: pointer; opacity: 0.6; }
        .modal-close-x:hover { opacity: 1; color: #06b6d4; }

        /* 2. 슬라이딩 캐러셀 구조 (사용자 기능 유지) */
        #technologyContainer {
            perspective: 1400px; width: 800px; height: 650px; margin: 40px auto; position: relative;
        }
        #carousel { width: 100%; height: 100%; position: relative; transform-style: preserve-3d; }
        
        .tech-card {
            position: absolute; width: 100%; height: 100%; top: 0; left: 0; padding: 2.5rem;
            border: 1px solid #333; border-radius: 1.5rem; background-color: #111;
            opacity: 0; pointer-events: none; z-index: 5; text-align: center;
            transition: transform 0.8s ease-out, opacity 0.8s ease-out; /* 슬라이딩 효과 핵심 */
        }
        .tech-card.is-active { opacity: 1; pointer-events: auto; z-index: 10; transform: translateX(0); border-color: #06b6d4; box-shadow: 0 0 30px rgba(6, 182, 212, 0.2); }

        /* 3. 개선된 버튼 디자인 (solutions.html 스타일) */
        .nav-btn { 
            position: absolute; top: 50%; transform: translateY(-50%); z-index: 30; 
            width: 50px; height: 50px; display: flex; align-items: center; justify-content: center;
            background: rgba(23, 23, 23, 0.8); border: 1px solid #333; border-radius: 50%; 
            color: #06b6d4; transition: all 0.3s;
        }
        .nav-btn:hover { background: #06b6d4; color: #000; border-color: #06b6d4; transform: translateY(-50%) scale(1.1); }
        #prevBtn { left: -70px; } #nextBtn { right: -70px; }

        /* 모바일 대응 */
        @media (max-width: 1024px) {
            #technologyContainer { width: 90%; height: auto; min-height: 550px; }
            #prevBtn { left: 10px; } #nextBtn { right: 10px; }
            .nav-btn { width: 40px; height: 40px; }
            .tech-card { padding: 1.5rem; }
        }

.dropdown-link { 
    padding: 12px 20px; display: block; color: #ccc; 
    border-bottom: 1px solid #262626; transition: all 0.2s;
}
.dropdown-link:hover { background-color: #1a1a1a; color: #22d3ee; }
.dropdown-quote-btn { 
    padding: 12px 20px; display: block; background: #22d3ee; 
    color: #000; font-weight: 600; text-align: center;
}

/* 수정된 캐러셀 구조 */
#technologyContainer {
    perspective: 1400px; 
    width: 800px; 
    /* height: 650px; <- 삭제: 고정 높이 대신 내부 콘텐츠에 맞춤 */
    margin: 40px auto; 
    position: relative;
}

#carousel { 
    width: 100%; 
    position: relative; 
    transform-style: preserve-3d;
    display: grid; /* 카드들이 겹쳐 있도록 설정 */
}

.tech-card {
    /* position: absolute; <- absolute는 부모 높이를 무시하므로 변경 필요 */
    grid-area: 1 / 1 / 2 / 2; /* 모든 카드를 동일한 그리드 칸에 겹침 */
    width: 100%; 
    height: auto; /* 콘텐츠 길이에 맞게 자동 조절 */
    padding: 2.5rem;
    border: 1px solid #333; 
    border-radius: 1.5rem; 
    background-color: #111;
    opacity: 0; 
    pointer-events: none; 
    z-index: 5; 
    text-align: center;
    transition: transform 0.8s ease-out, opacity 0.8s ease-out;
}

/* 활성화된 카드만 높이를 차지하도록 설정 */
.tech-card.is-active { 
    position: relative; /* 이 카드만 공간을 차지함 */
    opacity: 1; 
    pointer-events: auto; 
    z-index: 10; 
    transform: translateX(0); 
    border-color: #06b6d4; 
    box-shadow: 0 0 30px rgba(6, 182, 212, 0.2); 
}

/* 모바일 대응 */
@media (max-width: 1024px) {
    #technologyContainer { 
        width: 95%; 
        height: auto; 
        min-height: auto; /* 최소 높이 해제 */
    }
    .tech-card { padding: 1.5rem; }
    #prevBtn { left: -20px; } /* 버튼 위치 살짝 조정 */
    #nextBtn { right: -20px; }
}


    </style>
</head>

<body class="bg-neutral-950 text-neutral-100 font-[Pretendard] flex flex-col min-h-screen">

<header class="fixed top-0 left-0 w-full z-[10001] bg-neutral-950/90 backdrop-blur-sm border-b border-neutral-800 p-4 flex justify-between items-center">
    <a href="index.html" class="flex items-center gap-3 text-xl font-bold shrink-0">
        <img src="images/logo/logo.png" class="h-10 w-auto">
        <span class="animated-logo-text uppercase">TDL ENERGY INDONESIA</span>
    </a>

    <nav class="relative flex items-center gap-6">
        <ul class="hidden lg:flex items-center gap-8 text-sm font-light text-neutral-400">
            <li><a href="index.html" class="hover:text-cyan-400 transition">Home</a></li>
            <li><a href="products.html" class="hover:text-cyan-400 transition">Products</a></li>
            <li><a href="technology.html" class="text-cyan-400 font-bold">Technology</a></li>
            <li><a href="solutions.html" class="hover:text-cyan-400 transition">Solutions</a></li>
            <li><a href="company.html" class="hover:text-cyan-400 transition">Company</a></li>
            <li><a href="news.html" class="hover:text-cyan-400 transition">News</a></li>
            <li><a href="contact.html" class="px-5 py-2 rounded-full bg-cyan-400 text-black font-medium hover:bg-cyan-300 transition">Request Quote</a></li>
        </ul>

        <button id="menuToggle" class="lg:hidden text-2xl text-cyan-400 w-10 h-10 border border-cyan-500 rounded-full flex items-center justify-center">
            <span id="menuIcon">☰</span>
        </button>

        <div id="mobileDropdown" class="absolute top-full right-0 mt-4 w-56 bg-neutral-900 border border-neutral-700 rounded-xl opacity-0 invisible transition-all duration-300 z-[10002] shadow-2xl overflow-hidden">
            <a href="index.html" class="dropdown-link">Home</a>
            <a href="products.html" class="dropdown-link">Products</a>
            <a href="technology.html" class="dropdown-link text-cyan-400 font-bold">Technology</a>
            <a href="solutions.html" class="dropdown-link">Solutions</a>
            <a href="company.html" class="dropdown-link">Company</a>
            <a href="news.html" class="dropdown-link">News</a>
            <a href="contact.html" class="dropdown-quote-btn">Request Quote</a>
        </div>
    </nav>
</header>

<main class="flex-grow pt-44 pb-24 px-6">
    <div class="max-w-6xl mx-auto">
        <h3 class="text-4xl font-black tracking-wide hero-slogan-gradient text-center">Core Technology</h3>

        
        <div id="technologyContainer">
            <button id="prevBtn" class="nav-btn" aria-label="Previous">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/></svg>
            </button>

            <div id="carousel">
<div class="tech-card is-active" data-index="0">
    <img src="images/technology/72V20A.png" 
         data-popup-src="images/technology/72V20A-1.png"
         class="mx-auto mb-6 max-h-[450px] object-contain cursor-pointer" 
         data-detail="TDLiD’s 72V battery system utilizes LG NMC INR21700 cell architecture (20S4P/20S6P), delivering 73.8V nominal output, 19.7Ah–30.4Ah capacity options, fast 3-hour charging, and 50–60km real-world range within a compact 7.7kg form factor.
Engineered for electric motorcycles and marine e-mobility, the pack supports 13–20A discharge, thermal-adaptive charging safety, and high energy density for commercial-grade EV performance.">
    <h4 class="text-xl font-bold mb-4 text-cyan-400">72V 20Ah Battery</h4>
    <p class="text-xl mb-4">Cell Model: LG INR21700M50VT</p>
</div>

<div class="tech-card" data-index="1">
    <div class="max-h-[400px] overflow-y-auto pr-2 mb-4 custom-scrollbar">
        <img src="images/technology/72V20A-2.png" class="mx-auto mb-4 max-h-64 object-contain cursor-pointer" data-detail="">
        <img src="images/technology/72V20A-3.png" class="mx-auto mb-4 max-h-64 object-contain cursor-pointer" data-detail="">
        <img src="images/technology/72V20A-5.png" class="mx-auto mb-4 max-h-64 object-contain cursor-pointer" data-detail="em.">
        <img src="images/technology/72V20A-6.png" class="mx-auto mb-4 max-h-64 object-contain cursor-pointer" data-detail="">
    </div>
    <h4 class="text-xl font-bold mb-4 text-cyan-400">Smart Monitoring</h4>
    <p class="text-xl mb-4 text-white-300">Advanced BMS integration for safety and longevity.</p>
</div>

<style>
    /* 스크롤바 스타일 */
    .custom-scrollbar::-webkit-scrollbar { width: 6px; }
    .custom-scrollbar::-webkit-scrollbar-thumb { background: #333; border-radius: 10px; }
    .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: #06b6d4; }
</style>

                <div class="tech-card" data-index="2">
                    <img src="images/technology/YEDEA-1.png" class="mx-auto mb-6 max-h-64 object-contain cursor-pointer" data-detail="The integration of TDLiD’s 72V high-energy-density lithium-ion battery system with YADEA electric motorcycles enables significantly enhanced power delivery, torque response, and real-world riding range through optimized voltage architecture and LG NMC cell chemistry.
This pairing delivers superior thermal stability, rapid-charge capability, and drivetrain efficiency, positioning YADEA platforms for higher performance, extended duty cycles, and long-term commercial reliability.">
                    <img src="images/technology/72V5A-charger-2.png" class="mx-auto mb-6 max-h-64 object-contain cursor-pointer" data-detail="The pairing of TDLiD’s 72V-5A smart lithium charger with the 72V-20Ah battery enables optimized charge efficiency, cell balancing accuracy, and extended cycle life through controlled current delivery and thermal-safe charging algorithms.
This integration supports rapid turnaround charging, stable voltage retention, and reliable performance for daily EV use, reducing downtime while maximizing energy throughput and operational durability..">
                    <h4 class="text-xl font-bold mb-4 text-cyan-400">EV Integration (Designed for YEDEA and other major EV platforms.)</h4>
                </div>
            </div>

            <button id="nextBtn" class="nav-btn" aria-label="Next">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/></svg>
            </button>
        </div>
    </div>
</main>

<footer class="py-10 text-center text-neutral-500 border-t border-neutral-900">
    © 2025 TDL Energy Indonesia. All rights reserved.
</footer>

<script>
    // 1. 메뉴 제어 로직 (개선된 버전)
    const menuToggle = document.getElementById('menuToggle');
    const dropdown = document.getElementById('mobileDropdown');
    const menuIcon = document.getElementById('menuIcon');

    const toggleMenu = (show) => {
        const isOpening = show !== undefined ? show : dropdown.classList.contains('invisible');
        dropdown.classList.toggle('opacity-0', !isOpening);
        dropdown.classList.toggle('invisible', !isOpening);
        dropdown.classList.toggle('translate-y-2', !isOpening);
        dropdown.classList.toggle('translate-y-0', isOpening);
        menuIcon.innerText = isOpening ? '✕' : '☰';
    };

    menuToggle.onclick = (e) => { e.stopPropagation(); toggleMenu(); };
    document.onclick = (e) => { if(!dropdown.contains(e.target)) toggleMenu(false); };

    // 2. 슬라이딩 캐러셀 로직 (기존 기능 유지)
    let currentIndex = 0;
    const cards = document.querySelectorAll('.tech-card');
    const CARD_COUNT = cards.length;
    let isAnimating = false;
    let autoTimer;

    function showCard(newIndex, direction) {
        if (isAnimating) return;
        isAnimating = true;

        const oldIndex = currentIndex;
        currentIndex = newIndex;
        const prevCard = cards[oldIndex];
        const currentCard = cards[currentIndex];
        const slideDistance = 800; 

        // 애니메이션 설정
        prevCard.style.zIndex = '15';
        currentCard.style.zIndex = '10';
        currentCard.style.opacity = '1';
        currentCard.classList.add('is-active');

        requestAnimationFrame(() => {
            if (direction === 'next') {
                prevCard.style.transform = `translateX(-${slideDistance}px)`;
            } else {
                prevCard.style.transform = `translateX(${slideDistance}px)`;
            }
            prevCard.style.opacity = '0';
        });

        setTimeout(() => {
            prevCard.classList.remove('is-active');
            prevCard.style.transform = 'translateX(0)';
            isAnimating = false;
        }, 800);
    }

    const startAuto = () => { stopAuto(); autoTimer = setInterval(() => showCard((currentIndex + 1) % CARD_COUNT, 'next'), 4000); };
    const stopAuto = () => clearInterval(autoTimer);

    document.getElementById('prevBtn').onclick = () => { stopAuto(); showCard((currentIndex - 1 + CARD_COUNT) % CARD_COUNT, 'prev'); startAuto(); };
    document.getElementById('nextBtn').onclick = () => { stopAuto(); showCard((currentIndex + 1) % CARD_COUNT, 'next'); startAuto(); };

// 모든 카드 내의 모든 이미지를 찾아 클릭 이벤트 연결
cards.forEach(card => {
    const allImages = card.querySelectorAll('img');
    
    allImages.forEach(img => {
        img.onclick = function() {
            if (typeof stopAuto === 'function') stopAuto(); // 자동 전환 멈춤
            
            // 핵심 수정: data-popup-src 속성이 있으면 사용하고, 없으면 기본 src 사용
            const popupImgTarget = this.dataset.popupSrc || this.src;
            
            const modal = document.createElement('div');
            modal.className = 'modal-backdrop';
            modal.innerHTML = `
                <div class="modal-content">
                    <span class="modal-close-x">✕</span>
                    <img src="${popupImgTarget}" class="modal-image">
                    <p class="mt-4 text-neutral-300">${this.dataset.detail || ''}</p>
                    <button class="modal-close-btn">Close</button>
                </div>`;
                
            const close = () => { 
                document.body.removeChild(modal); 
                if (typeof startAuto === 'function') startAuto(); // 팝업 닫으면 다시 시작
            };
            
            modal.querySelector('.modal-close-btn').onclick = close;
            modal.querySelector('.modal-close-x').onclick = close;
            modal.onclick = (e) => { if(e.target === modal) close(); };
            document.body.appendChild(modal);
        };
    });
});

    startAuto();
</script>
</body>
</html>